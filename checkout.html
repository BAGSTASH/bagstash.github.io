<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Checkout | BagStash</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Main Styles -->
  <link rel="stylesheet" href="css/style.css">

  <style>
    /* Checkout-specific styles */
    .checkout-container {
      padding: 16px;
      max-width: 520px;
      margin: auto;
    }

    .checkout-box {
      background: #ffffff;
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.08);
      margin-top: 20px;
    }

    .checkout-box h2 {
      text-align: center;
      margin-bottom: 12px;
    }

    .checkout-item {
      display: flex;
      justify-content: space-between;
      font-size: 14px;
      margin: 8px 0;
    }

    .checkout-total {
      margin-top: 12px;
      font-weight: 600;
      text-align: right;
    }

    .checkout-form {
      margin-top: 16px;
    }

    .checkout-form label {
      display: block;
      margin-top: 12px;
      font-size: 14px;
    }

    .checkout-form input,
    .checkout-form textarea {
      width: 100%;
      padding: 10px;
      margin-top: 4px;
      border-radius: 10px;
      border: 1px solid #d1fae5;
      font-family: Poppins;
    }

    .checkout-form button {
      width: 100%;
      margin-top: 16px;
      padding: 12px;
      border: none;
      border-radius: 999px;
      background: #10b981;
      color: #ffffff;
      font-size: 15px;
      cursor: pointer;
    }

    .empty-cart {
      text-align: center;
      padding: 30px;
      color: #64748b;
    }
  </style>
</head>

<body>

<!-- HEADER -->
<header>
  <img src="Images/Logo.png" alt="Logo">
  <div class="cart-btn" onclick="window.location.href='index.html'">â¬… Back</div>
</header>

<div class="checkout-container">

  <!-- CART SUMMARY -->
  <div class="checkout-box">
    <h2>ðŸ§¾ Order Summary</h2>

    <div id="checkoutItems"></div>

    <div class="checkout-total">
      Total: â‚¹<span id="checkoutTotal">0</span>
    </div>
  </div>

  <!-- CUSTOMER FORM -->
  <div class="checkout-box">
    <h2>ðŸ‘¤ Customer Details</h2>

    <form class="checkout-form" onsubmit="placeOrder(event)">
      <label>Name</label>
      <input type="text" id="custName" required>

      <label>Phone</label>
      <input type="tel" id="custPhone" required>

      <label>Address</label>
      <textarea id="custAddress" rows="3" required></textarea>

      <button type="submit">ðŸ“² Place Order via WhatsApp</button>
    </form>
  </div>

</div>

<script>
/* =========================
   LOAD CART
========================= */
const cart = JSON.parse(localStorage.getItem("cart")) || [];
const itemsBox = document.getElementById("checkoutItems");
const totalEl = document.getElementById("checkoutTotal");

/* =========================
   RENDER CART
========================= */
let total = 0;

if (!cart.length) {
  itemsBox.innerHTML = '<div class="empty-cart">Your cart is empty</div>';
} else {
  let html = '';
  cart.forEach(item => {
    const lineTotal = item.price * item.qty;
    total += lineTotal;
    html += `
      <div class="checkout-item">
        <span>${item.name} Ã— ${item.qty}</span>
        <span>â‚¹${lineTotal}</span>
      </div>
    `;
  });
  itemsBox.innerHTML = html;
}

totalEl.innerText = total;

/* =========================
   PLACE ORDER
========================= */
function placeOrder(e) {
  e.preventDefault();

  if (!cart.length) {
    alert("Cart is empty");
    return;
  }

  const name = document.getElementById("custName").value;
  const phone = document.getElementById("custPhone").value;
  const address = document.getElementById("custAddress").value;

  let msg =
    `ðŸ§¾ *BAGSTASH â€“ ORDER INVOICE*%0A%0A` +
    `ðŸ‘¤ *Customer Details*%0A` +
    `Name: ${name}%0A` +
    `Phone: ${phone}%0A` +
    `Address: ${address}%0A%0A` +
    `ðŸ›ï¸ *Items:*%0A`;

  cart.forEach(item => {
    msg += `â€¢ ${item.name} Ã— ${item.qty} â€“ â‚¹${item.price * item.qty}%0A`;
  });

  msg += `%0AðŸ’° *Total Amount:* â‚¹${total}`;

  window.open("https://wa.me/918777438644?text=" + msg, "_blank");

  localStorage.removeItem("cart");
}
</script>

</body>
</html>